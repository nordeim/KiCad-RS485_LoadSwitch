(kicad_sch (version 20231001) (generator "eeschema")
  (paper "A4")
  (title_block
    (title "RS-485 4-Channel 12V Load Controller")
    (company "Industrial PWM Load Switch")
    (comment 1 "MCU: STM32F103C8T6, RS-485: THVD1450, 4x IRLZ44N + TC4468")
    (comment 2 "Buck: LM2596-5.0, LDO: MCP1700-3.3")
    (comment 3 "TVS: SMBJ24A (input), SM712 (RS-485), SMBJ33A (outputs)")
  )

  (global_label "+12V_IN"   (at 30 20 0) (shape input))
  (global_label "+12V_RAIL" (at 30 25 0) (shape input))
  (global_label "+5V"       (at 30 30 0) (shape input))
  (global_label "+3V3"      (at 30 35 0) (shape input))
  (global_label "GND"       (at 30 40 0) (shape input))

  (sheet (at 30 60) (size 140 80)
    (property "Sheet name" "Power")
    (property "Sheet file" "Power.kicad_sch")
    (pin (uuid "11111111-1111-1111-1111-000000000001") (at 30 70 0) (length 5.08) (name "+12V_IN")   (number "1") (shape input))
    (pin (uuid "11111111-1111-1111-1111-000000000002") (at 30 75 0) (length 5.08) (name "GND")        (number "2") (shape input))
    (pin (uuid "11111111-1111-1111-1111-000000000003") (at 30 80 0) (length 5.08) (name "+12V_RAIL")  (number "3") (shape output))
    (pin (uuid "11111111-1111-1111-1111-000000000004") (at 30 85 0) (length 5.08) (name "+5V")        (number "4") (shape output))
    (pin (uuid "11111111-1111-1111-1111-000000000005") (at 30 90 0) (length 5.08) (name "+3V3")       (number "5") (shape output))
  )

  (sheet (at 180 60) (size 140 60)
    (property "Sheet name" "RS485")
    (property "Sheet file" "RS485.kicad_sch")
    (pin (uuid "22222222-2222-2222-2222-000000000001") (at 180 70 0)  (length 5.08) (name "+5V")     (number "1") (shape input))
    (pin (uuid "22222222-2222-2222-2222-000000000002") (at 180 75 0)  (length 5.08) (name "GND")     (number "2") (shape input))
    (pin (uuid "22222222-2222-2222-2222-000000000003") (at 180 80 0)  (length 5.08) (name "UART_TX") (number "3") (shape input))
    (pin (uuid "22222222-2222-2222-2222-000000000004") (at 180 85 0)  (length 5.08) (name "UART_RX") (number "4") (shape output))
    (pin (uuid "22222222-2222-2222-2222-000000000005") (at 180 90 0)  (length 5.08) (name "UART_DE") (number "5") (shape input))
    (pin (uuid "22222222-2222-2222-2222-000000000006") (at 180 95 0)  (length 5.08) (name "RS485_A") (number "6") (shape bidirectional))
    (pin (uuid "22222222-2222-2222-2222-000000000007") (at 180 100 0) (length 5.08) (name "RS485_B") (number "7") (shape bidirectional))
  )

  (sheet (at 30 150) (size 150 90)
    (property "Sheet name" "MCU")
    (property "Sheet file" "MCU.kicad_sch")
    (pin (uuid "33333333-3333-3333-3333-000000000001") (at 30 160 0) (length 5.08) (name "+3V3")     (number "1")  (shape input))
    (pin (uuid "33333333-3333-3333-3333-000000000002") (at 30 165 0) (length 5.08) (name "GND")      (number "2")  (shape input))
    (pin (uuid "33333333-3333-3333-3333-000000000003") (at 30 170 0) (length 5.08) (name "UART_TX")  (number "3")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-000000000004") (at 30 175 0) (length 5.08) (name "UART_RX")  (number "4")  (shape input))
    (pin (uuid "33333333-3333-3333-3333-000000000005") (at 30 180 0) (length 5.08) (name "UART_DE")  (number "5")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-000000000006") (at 30 185 0) (length 5.08) (name "PWM1")     (number "6")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-000000000007") (at 30 190 0) (length 5.08) (name "PWM2")     (number "7")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-000000000008") (at 30 195 0) (length 5.08) (name "PWM3")     (number "8")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-000000000009") (at 30 200 0) (length 5.08) (name "PWM4")     (number "9")  (shape output))
    (pin (uuid "33333333-3333-3333-3333-00000000000a") (at 30 205 0) (length 5.08) (name "ADC_SNS1") (number "10") (shape input))
    (pin (uuid "33333333-3333-3333-3333-00000000000b") (at 30 210 0) (length 5.08) (name "ADC_SNS2") (number "11") (shape input))
    (pin (uuid "33333333-3333-3333-3333-00000000000c") (at 30 215 0) (length 5.08) (name "ADC_SNS3") (number "12") (shape input))
    (pin (uuid "33333333-3333-3333-3333-00000000000d") (at 30 220 0) (length 5.08) (name "ADC_SNS4") (number "13") (shape input))
  )

  (sheet (at 200 150) (size 120 70)
    (property "Sheet name" "GateDriver")
    (property "Sheet file" "GateDriver.kicad_sch")
    (pin (uuid "44444444-4444-4444-4444-000000000001") (at 200 160 0) (length 5.08) (name "+5V")      (number "1") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000002") (at 200 165 0) (length 5.08) (name "GND")      (number "2") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000003") (at 200 170 0) (length 5.08) (name "IN1")      (number "3") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000004") (at 200 175 0) (length 5.08) (name "IN2")      (number "4") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000005") (at 200 180 0) (length 5.08) (name "IN3")      (number "5") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000006") (at 200 185 0) (length 5.08) (name "IN4")      (number "6") (shape input))
    (pin (uuid "44444444-4444-4444-4444-000000000007") (at 200 190 0) (length 5.08) (name "OUT1_5V")  (number "7") (shape output))
    (pin (uuid "44444444-4444-4444-4444-000000000008") (at 200 195 0) (length 5.08) (name "OUT2_5V")  (number "8") (shape output))
    (pin (uuid "44444444-4444-4444-4444-000000000009") (at 200 200 0) (length 5.08) (name "OUT3_5V")  (number "9") (shape output))
    (pin (uuid "44444444-4444-4444-4444-00000000000a") (at 200 205 0) (length 5.08) (name "OUT4_5V")  (number "10") (shape output))
  )

  (sheet (at 360 60) (size 120 70)
    (property "Sheet name" "Channel1")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "1")
    (pin (uuid "51111111-5555-5555-5555-000000000001") (at 360 65 0)  (length 5.08) (name "+12V_RAIL") (number "1") (shape input))
    (pin (uuid "51111111-5555-5555-5555-000000000002") (at 360 70 0)  (length 5.08) (name "GND")       (number "2") (shape input))
    (pin (uuid "51111111-5555-5555-5555-000000000003") (at 360 75 0)  (length 5.08) (name "CTRL_5V")   (number "3") (shape input))
    (pin (uuid "51111111-5555-5555-5555-000000000004") (at 360 80 0)  (length 5.08) (name "OUT1")      (number "4") (shape output))
    (pin (uuid "51111111-5555-5555-5555-000000000005") (at 360 85 0)  (length 5.08) (name "ADC_SNS1")  (number "5") (shape output))
  )

  (sheet (at 360 140) (size 120 70)
    (property "Sheet name" "Channel2")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "2")
    (pin (uuid "52222222-5555-5555-5555-000000000001") (at 360 145 0) (length 5.08) (name "+12V_RAIL") (number "1") (shape input))
    (pin (uuid "52222222-5555-5555-5555-000000000002") (at 360 150 0) (length 5.08) (name "GND")       (number "2") (shape input))
    (pin (uuid "52222222-5555-5555-5555-000000000003") (at 360 155 0) (length 5.08) (name "CTRL_5V")   (number "3") (shape input))
    (pin (uuid "52222222-5555-5555-5555-000000000004") (at 360 160 0) (length 5.08) (name "OUT2")      (number "4") (shape output))
    (pin (uuid "52222222-5555-5555-5555-000000000005") (at 360 165 0) (length 5.08) (name "ADC_SNS2")  (number "5") (shape output))
  )

  (sheet (at 360 220) (size 120 70)
    (property "Sheet name" "Channel3")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "3")
    (pin (uuid "53333333-5555-5555-5555-000000000001") (at 360 225 0) (length 5.08) (name "+12V_RAIL") (number "1") (shape input))
    (pin (uuid "53333333-5555-5555-5555-000000000002") (at 360 230 0) (length 5.08) (name "GND")       (number "2") (shape input))
    (pin (uuid "53333333-5555-5555-5555-000000000003") (at 360 235 0) (length 5.08) (name "CTRL_5V")   (number "3") (shape input))
    (pin (uuid "53333333-5555-5555-5555-000000000004") (at 360 240 0) (length 5.08) (name "OUT3")      (number "4") (shape output))
    (pin (uuid "53333333-5555-5555-5555-000000000005") (at 360 245 0) (length 5.08) (name "ADC_SNS3")  (number "5") (shape output))
  )

  (sheet (at 360 300) (size 120 70)
    (property "Sheet name" "Channel4")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "4")
    (pin (uuid "54444444-5555-5555-5555-000000000001") (at 360 305 0) (length 5.08) (name "+12V_RAIL") (number "1") (shape input))
    (pin (uuid "54444444-5555-5555-5555-000000000002") (at 360 310 0) (length 5.08) (name "GND")       (number "2") (shape input))
    (pin (uuid "54444444-5555-5555-5555-000000000003") (at 360 315 0) (length 5.08) (name "CTRL_5V")   (number "3") (shape input))
    (pin (uuid "54444444-5555-5555-5555-000000000004") (at 360 320 0) (length 5.08) (name "OUT4")      (number "4") (shape output))
    (pin (uuid "54444444-5555-5555-5555-000000000005") (at 360 325 0) (length 5.08) (name "ADC_SNS4")  (number "5") (shape output))
  )
)
