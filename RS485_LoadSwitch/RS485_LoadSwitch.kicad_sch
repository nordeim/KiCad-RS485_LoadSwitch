(kicad_sch (version 20231001) (generator "eeschema")
  (paper "A4")
  (title_block
    (title "RS-485 4-Channel 12V Load Controller")
    (company "Industrial PWM Load Switch")
    (comment 1 "MCU: STM32F103C8T6, RS-485: THVD1450, 4x IRLZ44N + TC4468")
    (comment 2 "Buck: LM2596-5.0, LDO: MCP1700-3.3")
    (comment 3 "TVS: SMBJ24A (input), SM712 (RS-485), SMBJ33A (outputs)")
  )

  (global_label "+12V_IN"   (at 30 20 0) (shape input))
  (global_label "+12V_RAIL" (at 30 25 0) (shape input))
  (global_label "+5V"       (at 30 30 0) (shape input))
  (global_label "+3V3"      (at 30 35 0) (shape input))
  (global_label "GND"       (at 30 40 0) (shape input))

  (sheet (at 30 60) (size 140 80)
    (property "Sheet name" "Power")
    (property "Sheet file" "Power.kicad_sch")
    (pin (uuid 1) (at 30 70) (name "+12V_IN") (shape input))
    (pin (uuid 2) (at 30 75) (name "GND") (shape input))
    (pin (uuid 3) (at 30 80) (name "+12V_RAIL") (shape output))
    (pin (uuid 4) (at 30 85) (name "+5V") (shape output))
    (pin (uuid 5) (at 30 90) (name "+3V3") (shape output))
  )

  (sheet (at 180 60) (size 140 60)
    (property "Sheet name" "RS485")
    (property "Sheet file" "RS485.kicad_sch")
    (pin (uuid 10) (at 180 70) (name "+5V") (shape input))
    (pin (uuid 11) (at 180 75) (name "GND") (shape input))
    (pin (uuid 12) (at 180 80) (name "UART_TX") (shape input))
    (pin (uuid 13) (at 180 85) (name "UART_RX") (shape output))
    (pin (uuid 14) (at 180 90) (name "UART_DE") (shape input))
    (pin (uuid 15) (at 180 95) (name "RS485_A") (shape bidirectional))
    (pin (uuid 16) (at 180 100) (name "RS485_B") (shape bidirectional))
  )

  (sheet (at 30 150) (size 150 90)
    (property "Sheet name" "MCU")
    (property "Sheet file" "MCU.kicad_sch")
    (pin (uuid 20) (at 30 160) (name "+3V3") (shape input))
    (pin (uuid 21) (at 30 165) (name "GND") (shape input))
    (pin (uuid 22) (at 30 170) (name "UART_TX") (shape output))
    (pin (uuid 23) (at 30 175) (name "UART_RX") (shape input))
    (pin (uuid 24) (at 30 180) (name "UART_DE") (shape output))
    (pin (uuid 25) (at 30 185) (name "PWM1") (shape output))
    (pin (uuid 26) (at 30 190) (name "PWM2") (shape output))
    (pin (uuid 27) (at 30 195) (name "PWM3") (shape output))
    (pin (uuid 28) (at 30 200) (name "PWM4") (shape output))
    (pin (uuid 29) (at 30 205) (name "ADC_SNS1") (shape input))
    (pin (uuid 30) (at 30 210) (name "ADC_SNS2") (shape input))
    (pin (uuid 31) (at 30 215) (name "ADC_SNS3") (shape input))
    (pin (uuid 32) (at 30 220) (name "ADC_SNS4") (shape input))
  )

  (sheet (at 200 150) (size 120 70)
    (property "Sheet name" "GateDriver")
    (property "Sheet file" "GateDriver.kicad_sch")
    (pin (uuid 40) (at 200 160) (name "+5V") (shape input))
    (pin (uuid 41) (at 200 165) (name "GND") (shape input))
    (pin (uuid 42) (at 200 170) (name "IN1") (shape input))
    (pin (uuid 43) (at 200 175) (name "IN2") (shape input))
    (pin (uuid 44) (at 200 180) (name "IN3") (shape input))
    (pin (uuid 45) (at 200 185) (name "IN4") (shape input))
    (pin (uuid 46) (at 200 190) (name "OUT1_5V") (shape output))
    (pin (uuid 47) (at 200 195) (name "OUT2_5V") (shape output))
    (pin (uuid 48) (at 200 200) (name "OUT3_5V") (shape output))
    (pin (uuid 49) (at 200 205) (name "OUT4_5V") (shape output))
  )

  (sheet (at 360 60) (size 120 70)
    (property "Sheet name" "Channel1")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "1")
    (pin (uuid 60) (at 360 65) (name "+12V_RAIL") (shape input))
    (pin (uuid 61) (at 360 70) (name "GND") (shape input))
    (pin (uuid 62) (at 360 75) (name "CTRL_5V") (shape input))
    (pin (uuid 63) (at 360 80) (name "OUT1") (shape output))
    (pin (uuid 64) (at 360 85) (name "ADC_SNS1") (shape output))
  )
  (sheet (at 360 140) (size 120 70)
    (property "Sheet name" "Channel2")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "2")
    (pin (uuid 70) (at 360 145) (name "+12V_RAIL") (shape input))
    (pin (uuid 71) (at 360 150) (name "GND") (shape input))
    (pin (uuid 72) (at 360 155) (name "CTRL_5V") (shape input))
    (pin (uuid 73) (at 360 160) (name "OUT2") (shape output))
    (pin (uuid 74) (at 360 165) (name "ADC_SNS2") (shape output))
  )
  (sheet (at 360 220) (size 120 70)
    (property "Sheet name" "Channel3")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "3")
    (pin (uuid 80) (at 360 225) (name "+12V_RAIL") (shape input))
    (pin (uuid 81) (at 360 230) (name "GND") (shape input))
    (pin (uuid 82) (at 360 235) (name "CTRL_5V") (shape input))
    (pin (uuid 83) (at 360 240) (name "OUT3") (shape output))
    (pin (uuid 84) (at 360 245) (name "ADC_SNS3") (shape output))
  )
  (sheet (at 360 300) (size 120 70)
    (property "Sheet name" "Channel4")
    (property "Sheet file" "Channel.kicad_sch")
    (property "Channel" "4")
    (pin (uuid 90) (at 360 305) (name "+12V_RAIL") (shape input))
    (pin (uuid 91) (at 360 310) (name "GND") (shape input))
    (pin (uuid 92) (at 360 315) (name "CTRL_5V") (shape input))
    (pin (uuid 93) (at 360 320) (name "OUT4") (shape output))
    (pin (uuid 94) (at 360 325) (name "ADC_SNS4") (shape output))
  )
)
